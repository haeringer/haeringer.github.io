<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Access an NTFS USB drive over a Samba share - kb</title>	
	<meta name="author" content="ben">
	

	<meta name="description" content="I needed to plug an NTFS formatted USB harddisk into my Debian home server (with Samba file services already running on it) and access it from my PCs in the network. To achieve full read/write access for the Windows users, you need the driver NTFS-3G. Install ntfs-3g apt-get ...">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
		

</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	    </div>
		<a href="" class="title">kb</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Access an NTFS USB drive over a Samba share</h1>
		
<div class="metadata">
  <time datetime="2010-04-08T15:19:00" pubdate>Do 08 April 2010</time>
    <address class="vcard author">
      by <a class="url fn" href="/author/ben.html">ben</a>
    </address>
  in <a href="/category/linux.html">Linux</a>
<p class="tags">tagged <a href="/tag/smb.html">SMB</a>, <a href="/tag/usb.html">USB</a></p></div>		
		<p>I needed to plug an NTFS formatted USB harddisk into my Debian home server (with Samba
file services already running on it) and access it from my PCs in the network. 
To achieve full read/write access for the Windows users, you need the driver NTFS-3G.</p>
<p>Install ntfs-3g</p>
<div class="highlight"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">ntfs</span><span class="o">-</span><span class="mi">3</span><span class="n">g</span>
</pre></div>


<p>Create the mointpoint for the NTFS disk, e.g.</p>
<div class="highlight"><pre><span class="n">mkdir</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">usb</span><span class="o">/</span><span class="n">ntfs</span>
</pre></div>


<!--more-->

<p>Add a line to the fstab file ("umask=000" has the effect to allow write
access for all users):</p>
<div class="highlight"><pre><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">usb</span><span class="o">/</span><span class="n">ntfs</span> <span class="n">ntfs</span><span class="o">-</span><span class="mi">3</span><span class="n">g</span> <span class="n">defaults</span><span class="p">,</span><span class="n">rw</span><span class="p">,</span><span class="n">umask</span><span class="o">=</span><span class="mo">000</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>


<p>Mount the device:</p>
<div class="highlight"><pre><span class="n">mount</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">sdb1</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">usb</span><span class="o">/</span><span class="n">ntfs</span>
</pre></div>


<p>I then added an additional share to my Samba smb.conf so I can mount the
USB drive as a separate network drive in Windows:</p>
<div class="highlight"><pre><span class="k">[usb]</span>
   <span class="na">comment</span> <span class="o">=</span> <span class="s">USB device connected to server</span>
<span class="s">   path = /mnt/usb/ntfs</span>
<span class="s">   guest ok = yes</span>
<span class="s">   browseable = yes</span>
<span class="s">   read only = no</span>
</pre></div>	

	</article>

    <p>
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</p>


		  </div>	
		  
		  <div class="sidebar">

	        <nav>
	          <h2>Categories</h2>
	          <ul>
	              <li ><a href="/category/cisco.html">Cisco</a></li>
	              <li class="active"><a href="/category/linux.html">Linux</a></li>
	              <li ><a href="/category/linux-networking.html">Linux, Networking</a></li>
	              <li ><a href="/category/linux-networking-windows.html">Linux, Networking, Windows</a></li>
	              <li ><a href="/category/linux-virtualization.html">Linux, Virtualization</a></li>
	              <li ><a href="/category/networking.html">Networking</a></li>
	              <li ><a href="/category/virtualization.html">Virtualization</a></li>
	              <li ><a href="/category/windows.html">Windows</a></li>
	          </ul>
	        </nav>



		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  Â© 2013 ben - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey">pelican-simplegrey</a>.
    	</p>

	  </footer>	

	</div>
	

</body>
</html>